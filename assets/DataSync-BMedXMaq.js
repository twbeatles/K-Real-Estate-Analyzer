import{c as h,r as o,j as e,R as $,i as w}from"./index-DqMozl_p.js";import{D as u}from"./download-qrALO9Ju.js";import{F as A}from"./file-text-hOwyIaeO.js";import{U as f}from"./upload-DnJlqaB5.js";import{L as J}from"./link-C6jkzfjr.js";import{C as E}from"./check-B0yIZSUd.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=h("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=h("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=h("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=h("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function Z(){const[c,I]=o.useState("export"),[l,b]=o.useState("json"),[C,k]=o.useState(!1),[p,x]=o.useState(null),m=o.useMemo(()=>{const s=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t),r=localStorage.getItem(a);s.push({key:a,size:new Blob([r]).size,preview:r.substring(0,100)})}return s.sort((t,a)=>a.size-t.size)},[]),B=o.useMemo(()=>m.reduce((s,t)=>s+t.size,0),[m]),g=o.useCallback(()=>{const s={};return["portfolio_properties","alert_settings","alert_notifications","chatbot_messages","watchlist_regions","saved_simulations","user_settings"].forEach(a=>{const r=localStorage.getItem(a);if(r)try{s[a]=JSON.parse(r)}catch{s[a]=r}}),{exportedAt:new Date().toISOString(),version:"1.0",data:s}},[]),N=o.useCallback(()=>{const s=g();let t,a,r;if(l==="json")t=JSON.stringify(s,null,2),a=`realestate_backup_${new Date().toISOString().split("T")[0]}.json`,r="application/json";else{const j=s.data.portfolio_properties||[],_=["이름","주소","유형","매입가","현재가","대출","취득일"],M=j.map(n=>[n.name,n.address,n.type,n.purchasePrice,n.currentPrice,n.loanAmount,n.purchaseDate]);t=[_.join(","),...M.map(n=>n.join(","))].join(`
`),a=`portfolio_${new Date().toISOString().split("T")[0]}.csv`,r="text/csv"}const y=new Blob([t],{type:r}),i=URL.createObjectURL(y),d=document.createElement("a");d.href=i,d.download=a,d.click(),URL.revokeObjectURL(i)},[l,g]),D=o.useCallback(s=>{var r;const t=(r=s.target.files)==null?void 0:r[0];if(!t)return;const a=new FileReader;a.onload=y=>{try{const i=JSON.parse(y.target.result);if(!i.data)throw new Error("Invalid format");Object.entries(i.data).forEach(([d,j])=>{localStorage.setItem(d,JSON.stringify(j))}),x({success:!0,message:`${Object.keys(i.data).length}개 항목 가져오기 완료!`}),setTimeout(()=>x(null),3e3)}catch{x({success:!1,message:"파일 형식이 올바르지 않습니다."}),setTimeout(()=>x(null),3e3)}},a.readAsText(t),s.target.value=""},[]),O=o.useCallback(()=>{const s=g(),t=btoa(JSON.stringify(s.data)),a=`${window.location.origin}${window.location.pathname}?import=${t.substring(0,100)}...`;navigator.clipboard.writeText(a),k(!0),setTimeout(()=>k(!1),2e3)},[g]),R=o.useCallback(s=>{confirm(`"${s}" 데이터를 삭제하시겠습니까?`)&&(localStorage.removeItem(s),window.location.reload())},[]),F=o.useCallback(()=>{confirm("모든 저장된 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&(localStorage.clear(),window.location.reload())},[]),S=s=>s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/1024/1024).toFixed(1)} MB`,T=[{id:"export",label:"내보내기",icon:e.jsx(u,{size:16})},{id:"import",label:"가져오기",icon:e.jsx(f,{size:16})},{id:"share",label:"공유",icon:e.jsx(z,{size:16})},{id:"storage",label:"저장소 관리",icon:e.jsx(v,{size:16})}];return e.jsxs("div",{className:"page-container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"page-title",children:[e.jsx($,{size:28})," 데이터 동기화"]}),e.jsx("p",{className:"page-subtitle",children:"데이터 백업, 복원 및 공유"})]})}),e.jsx("div",{style:{display:"flex",gap:8,marginBottom:24,flexWrap:"wrap"},children:T.map(s=>e.jsxs("button",{onClick:()=>I(s.id),style:{display:"flex",alignItems:"center",gap:8,padding:"10px 20px",borderRadius:8,border:"none",background:c===s.id?"var(--color-primary)":"var(--color-bg-secondary)",color:c===s.id?"white":"var(--color-text-primary)",cursor:"pointer"},children:[s.icon," ",s.label]},s.id))}),c==="export"&&e.jsxs("div",{className:"glass-card",style:{padding:24},children:[e.jsxs("h3",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(u,{size:20})," 데이터 내보내기"]}),e.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:24},children:"저장된 모든 데이터를 파일로 내보내어 백업하세요."}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("label",{style:{display:"block",marginBottom:8},children:"형식 선택"}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,padding:"12px 20px",background:l==="json"?"rgba(99, 102, 241, 0.1)":"var(--color-bg-secondary)",border:l==="json"?"2px solid var(--color-primary)":"2px solid transparent",borderRadius:8,cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"format",value:"json",checked:l==="json",onChange:()=>b("json"),style:{display:"none"}}),e.jsx(U,{size:20})," JSON (전체 데이터)"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,padding:"12px 20px",background:l==="csv"?"rgba(99, 102, 241, 0.1)":"var(--color-bg-secondary)",border:l==="csv"?"2px solid var(--color-primary)":"2px solid transparent",borderRadius:8,cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"format",value:"csv",checked:l==="csv",onChange:()=>b("csv"),style:{display:"none"}}),e.jsx(A,{size:20})," CSV (포트폴리오만)"]})]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:N,style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(u,{size:18})," 파일 다운로드"]})]}),c==="import"&&e.jsxs("div",{className:"glass-card",style:{padding:24},children:[e.jsxs("h3",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(f,{size:20})," 데이터 가져오기"]}),e.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:24},children:"백업 파일에서 데이터를 복원합니다. 기존 데이터는 덮어쓰기됩니다."}),p&&e.jsx("div",{style:{padding:12,marginBottom:16,borderRadius:8,background:p.success?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:p.success?"var(--color-success)":"var(--color-danger)"},children:p.message}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:48,border:"2px dashed var(--color-border)",borderRadius:12,cursor:"pointer",transition:"all 0.2s"},onDragOver:s=>s.preventDefault(),children:[e.jsx(f,{size:40,style:{marginBottom:16,opacity:.5}}),e.jsx("p",{style:{marginBottom:8},children:"클릭하거나 파일을 드래그하세요"}),e.jsx("p",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"JSON 파일만 지원"}),e.jsx("input",{type:"file",accept:".json",onChange:D,style:{display:"none"}})]})]}),c==="share"&&e.jsxs("div",{className:"glass-card",style:{padding:24},children:[e.jsxs("h3",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(z,{size:20})," 데이터 공유"]}),e.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:24},children:"설정과 데이터를 다른 기기로 쉽게 옮길 수 있는 링크를 생성합니다."}),e.jsxs("div",{style:{marginBottom:24,padding:16,background:"var(--color-bg-secondary)",borderRadius:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(J,{size:16}),e.jsx("span",{style:{fontWeight:600},children:"공유 링크 생성"})]}),e.jsx("p",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"* 대용량 데이터는 링크에 포함되지 않을 수 있습니다. 전체 백업은 내보내기를 이용해주세요."})]}),e.jsx("button",{className:"btn btn-primary",onClick:O,style:{display:"flex",alignItems:"center",gap:8},children:C?e.jsxs(e.Fragment,{children:[e.jsx(E,{size:18})," 클립보드에 복사됨!"]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{size:18})," 공유 링크 복사"]})})]}),c==="storage"&&e.jsxs("div",{className:"glass-card",style:{padding:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(v,{size:20})," 저장소 관리"]}),e.jsxs("span",{style:{fontSize:14,color:"var(--color-text-secondary)"},children:["총 ",S(B)," 사용중"]})]}),m.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:24},children:m.map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:12,background:"var(--color-bg-secondary)",borderRadius:8},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:s.key}),e.jsx("div",{style:{fontSize:12,color:"var(--color-text-secondary)"},children:S(s.size)})]}),e.jsx("button",{className:"btn-icon",onClick:()=>R(s.key),style:{color:"var(--color-danger)"},children:e.jsx(w,{size:16})})]},s.key))}),e.jsxs("button",{className:"btn btn-danger",onClick:F,style:{display:"flex",alignItems:"center",gap:8,background:"var(--color-danger)"},children:[e.jsx(w,{size:18})," 모든 데이터 삭제"]})]}):e.jsxs("div",{style:{textAlign:"center",padding:48,color:"var(--color-text-secondary)"},children:[e.jsx(v,{size:48,style:{marginBottom:16,opacity:.5}}),e.jsx("p",{children:"저장된 데이터가 없습니다."})]})]})]})}export{Z as default};
//# sourceMappingURL=DataSync-BMedXMaq.js.map
