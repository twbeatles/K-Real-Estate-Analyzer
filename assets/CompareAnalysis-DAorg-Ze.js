import{r as o,g as N,d as z,j as e,s as w,X as I,M as R,T as W}from"./index-BLr5D_S7.js";import{C as B}from"./ChartContainer-CyAQG52t.js";import{a as j}from"./formatters-UyfiUF7z.js";import{R as K,C as T,X as L,Y as M,T as D,L as F}from"./generateCategoricalChart-BBoIPssj.js";import{L as V}from"./LineChart-CKdku7md.js";import{L as $}from"./Line-D4AMrEa7.js";import"./download-Da_Z81Y8.js";const q=()=>{var x,y;const[A,X]=o.useState("region"),[a,h]=o.useState(["seoul","gyeonggi"]),[m,f]=o.useState("5y"),g=o.useMemo(()=>N(),[]);o.useMemo(()=>z(),[]);const v={"1y":12,"3y":36,"5y":60,"10y":120,all:g.length},s=g.slice(-v[m]),i={seoul:"#ef4444",gyeonggi:"#f97316",incheon:"#eab308",busan:"#22c55e",daegu:"#14b8a6",daejeon:"#0ea5e9",gwangju:"#6366f1",sejong:"#ec4899"},l=[{id:"seoul",name:"서울",dataKey:"hpiSeoul"},{id:"gyeonggi",name:"경기",dataKey:"hpiGyeonggi"},{id:"nation",name:"전국",dataKey:"hpiNation"},{id:"local",name:"지방",dataKey:"hpiLocal"}],b=t=>{!a.includes(t)&&a.length<4&&h([...a,t])},S=t=>{a.length>1&&h(a.filter(r=>r!==t))},p=o.useMemo(()=>{const t=s[0],r=s[s.length-1];return a.map(n=>{const d=l.find(k=>k.id===n);if(!d)return null;const c=t[d.dataKey],u=r[d.dataKey],C=(u-c)/c*100;return{id:n,name:d.name,startValue:c,endValue:u,change:C,color:i[n]||"var(--color-primary)"}}).filter(Boolean)},[s,a]);return e.jsxs("div",{className:"page-container",children:[e.jsx("div",{className:"card",style:{marginBottom:24},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(w,{size:20,style:{color:"var(--color-primary)"}}),e.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:"비교 분석"})]}),e.jsx("div",{style:{display:"flex",gap:8},children:["1y","3y","5y","10y","all"].map(t=>e.jsx("button",{onClick:()=>f(t),className:`btn ${m===t?"btn-primary":"btn-ghost"}`,style:{padding:"6px 12px",fontSize:"0.8rem"},children:t==="all"?"전체":t},t))})]})}),e.jsxs("div",{className:"card",style:{marginBottom:24},children:[e.jsx("h3",{className:"card-title",style:{marginBottom:16},children:"비교 대상 선택 (최대 4개)"}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:16},children:[a.map(t=>{const r=l.find(n=>n.id===t);return r?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"var(--color-primary-light)",borderRadius:"var(--radius-md)",border:`2px solid ${i[t]||"var(--color-primary)"}`},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:i[t]||"var(--color-primary)"}}),e.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:r.name}),a.length>1&&e.jsx("button",{onClick:()=>S(t),style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-text-tertiary)",padding:2},children:e.jsx(I,{size:14})})]},t):null}),a.length<4&&e.jsx("div",{style:{position:"relative"},children:e.jsxs("select",{onChange:t=>{b(t.target.value),t.target.value=""},className:"input select",style:{paddingRight:40},value:"",children:[e.jsx("option",{value:"",disabled:!0,children:"+ 추가"}),l.filter(t=>!a.includes(t.id)).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})]})]}),e.jsx("div",{className:"grid-stats",style:{marginBottom:24},children:p.map(t=>e.jsxs("div",{className:"stat-card",style:{borderTop:`3px solid ${t.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(R,{size:16,style:{color:t.color}}),e.jsx("span",{style:{fontWeight:600},children:t.name})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:4},children:t.endValue.toFixed(1)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:"0.875rem",color:t.change>=0?"var(--color-success)":"var(--color-danger)"},children:[e.jsx(W,{size:14}),j(t.change)," (기간 내)"]})]},t.id))}),e.jsx(B,{title:"지역별 주택가격지수 비교",subtitle:`${(x=s[0])==null?void 0:x.date} ~ ${(y=s[s.length-1])==null?void 0:y.date}`,height:450,children:e.jsx(K,{width:"100%",height:"100%",children:e.jsxs(V,{data:s,children:[e.jsx(T,{strokeDasharray:"3 3",stroke:"var(--color-border)",vertical:!1}),e.jsx(L,{dataKey:"date",tick:{fontSize:11,fill:"var(--color-text-tertiary)"},minTickGap:50}),e.jsx(M,{tick:{fontSize:11,fill:"var(--color-text-tertiary)"},domain:["auto","auto"]}),e.jsx(D,{contentStyle:{background:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"}}),e.jsx(F,{}),a.map(t=>{const r=l.find(n=>n.id===t);return r?e.jsx($,{type:"monotone",dataKey:r.dataKey,name:r.name,stroke:i[t]||"var(--color-primary)",strokeWidth:2.5,dot:!1},t):null})]})})}),e.jsxs("div",{className:"card",style:{marginTop:24},children:[e.jsx("h3",{className:"card-title",style:{marginBottom:16},children:"상세 비교"}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"지역"}),e.jsx("th",{children:"시작 지수"}),e.jsx("th",{children:"현재 지수"}),e.jsx("th",{children:"변화율"}),e.jsx("th",{children:"순위"})]})}),e.jsx("tbody",{children:[...p].sort((t,r)=>r.change-t.change).map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:t.color}}),t.name]})}),e.jsx("td",{style:{fontFeatureSettings:"'tnum' 1"},children:t.startValue.toFixed(1)}),e.jsx("td",{style:{fontFeatureSettings:"'tnum' 1",fontWeight:600},children:t.endValue.toFixed(1)}),e.jsx("td",{style:{color:t.change>=0?"var(--color-success)":"var(--color-danger)",fontWeight:600},children:j(t.change)}),e.jsx("td",{children:e.jsxs("span",{style:{padding:"4px 8px",borderRadius:"var(--radius-sm)",background:r===0?"var(--color-warning)":"var(--color-bg-tertiary)",color:r===0?"white":"var(--color-text-secondary)",fontSize:"0.75rem",fontWeight:600},children:[r+1,"위"]})})]},t.id))})]})})]})]})};export{q as default};
//# sourceMappingURL=CompareAnalysis-DAorg-Ze.js.map
