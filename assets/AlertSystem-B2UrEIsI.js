import{c as M,r as i,j as e,o as u,O as I,X as H,T as A,I as T,i as B}from"./index-BYBhPLOX.js";import{e as U}from"./formatters-UyfiUF7z.js";import{P as D}from"./plus-CjBnM4MQ.js";import{P as R}from"./percent-BzbWGzFf.js";import{T as P}from"./triangle-alert-BtiQQ0ni.js";import{T as X}from"./trending-down-BaR_FbPx.js";import{S as G}from"./save-BfZ7pjXb.js";import{P as K}from"./pen-BI9XVCxa.js";import{C as Q}from"./clock-CPDE1R4i.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=M("BellOff",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=M("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);function oe(){const[r,c]=i.useState([]),[o,p]=i.useState([]),[E,x]=i.useState(!1),[d,N]=i.useState(null),[v,k]=i.useState("default"),[l,C]=i.useState("settings"),[n,b]=i.useState({name:"",type:"price",region:"서울",condition:"increase",threshold:5,enabled:!0});i.useEffect(()=>{"Notification"in window&&k(Notification.permission)},[]),i.useEffect(()=>{const s=localStorage.getItem("alert_settings"),a=localStorage.getItem("alert_notifications");if(s)try{c(JSON.parse(s))}catch{}if(a)try{p(JSON.parse(a))}catch{}},[]),i.useEffect(()=>{localStorage.setItem("alert_settings",JSON.stringify(r))},[r]),i.useEffect(()=>{localStorage.setItem("alert_notifications",JSON.stringify(o))},[o]);const O=async()=>{if("Notification"in window){const s=await Notification.requestPermission();k(s),s==="granted"&&new Notification("알림 설정 완료",{body:"이제 부동산 관련 알림을 받을 수 있습니다."})}},g=i.useCallback((s,a)=>{b(t=>({...t,[s]:a}))},[]),m=i.useCallback(()=>{b({name:"",type:"price",region:"서울",condition:"increase",threshold:5,enabled:!0}),x(!1),N(null)},[]),q=i.useCallback(()=>{if(!n.name){alert("알림명을 입력해주세요.");return}const s={id:d||Date.now(),...n,threshold:Number(n.threshold)||0};c(d?a=>a.map(t=>t.id===d?{...t,...s}:t):a=>[...a,s]),m()},[n,d,m]),L=i.useCallback(s=>{b({name:s.name,type:s.type,region:s.region,condition:s.condition,threshold:s.threshold,enabled:s.enabled}),N(s.id),x(!0)},[]),_=i.useCallback(s=>{confirm("정말 삭제하시겠습니까?")&&c(a=>a.filter(t=>t.id!==s))},[]),J=i.useCallback(s=>{c(a=>a.map(t=>t.id===s?{...t,enabled:!t.enabled}:t))},[]),V=i.useCallback(()=>{p([]),localStorage.removeItem("alert_notifications")},[]),W=i.useCallback(()=>{const s=[{type:"price",title:"서울 아파트 가격 상승",message:"서울 아파트 평균 가격이 전월 대비 2.5% 상승했습니다.",severity:"warning"},{type:"rate",title:"기준금리 동결",message:"한국은행 기준금리가 3.50%로 동결되었습니다.",severity:"info"},{type:"policy",title:"LTV 규제 완화",message:"정부가 LTV 규제를 70%에서 80%로 완화할 예정입니다.",severity:"success"}],a=s[Math.floor(Math.random()*s.length)],t={id:Date.now(),...a,timestamp:new Date().toISOString(),read:!1};p(y=>[t,...y].slice(0,50)),v==="granted"&&new Notification(a.title,{body:a.message})},[v]),j=[{value:"price",label:"가격 변동",icon:A},{value:"rate",label:"금리 변동",icon:R},{value:"policy",label:"정책 변경",icon:P},{value:"transaction",label:"거래량 변동",icon:X}],$=["서울","경기","인천","부산","대구","광주","대전","울산","세종","강원","충북","충남","전북","전남","경북","경남","제주"],w=[{value:"increase",label:"상승 시"},{value:"decrease",label:"하락 시"},{value:"change",label:"변동 시"}],F=i.useMemo(()=>r.filter(s=>s.enabled),[r]),S=i.useMemo(()=>o.filter(s=>!s.read).length,[o]);return e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"page-title",children:[e.jsx(u,{size:28})," 알림 시스템"]}),e.jsx("p",{className:"page-subtitle",children:"부동산 시장 변동 알림을 설정하고 관리하세요"})]}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:W,children:[e.jsx(I,{size:18})," 테스트 알림"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>x(!0),children:[e.jsx(D,{size:18})," 알림 추가"]})]})]}),v!=="granted"&&e.jsx("div",{className:"glass-card",style:{padding:16,marginBottom:24,background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1))"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(f,{size:24,style:{color:"var(--color-warning)"}}),e.jsxs("div",{children:[e.jsx("strong",{children:"브라우저 알림이 비활성화되어 있습니다"}),e.jsx("p",{style:{margin:0,fontSize:14,color:"var(--color-text-secondary)"},children:"실시간 알림을 받으려면 브라우저 알림을 허용해주세요."})]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:O,children:[e.jsx(Y,{size:16})," 알림 허용"]})]})}),E&&e.jsx("div",{className:"modal-overlay",onClick:m,children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),style:{maxWidth:500},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:d?"알림 수정":"새 알림 추가"}),e.jsx("button",{className:"btn-icon",onClick:m,children:e.jsx(H,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"알림명 *"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>g("name",s.target.value),placeholder:"예: 강남 아파트 가격 상승 알림"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"알림 유형"}),e.jsx("select",{value:n.type,onChange:s=>g("type",s.target.value),children:j.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"지역"}),e.jsx("select",{value:n.region,onChange:s=>g("region",s.target.value),children:$.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"조건"}),e.jsx("select",{value:n.condition,onChange:s=>g("condition",s.target.value),children:w.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"임계값 (%)"}),e.jsx("input",{type:"number",value:n.threshold,onChange:s=>g("threshold",s.target.value),min:"0",step:"0.1"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:m,children:"취소"}),e.jsxs("button",{className:"btn btn-primary",onClick:q,children:[e.jsx(G,{size:16})," 저장"]})]})]})}),e.jsxs("div",{className:"tabs",style:{display:"flex",gap:8,marginBottom:24},children:[e.jsxs("button",{className:`tab-btn ${l==="settings"?"active":""}`,onClick:()=>C("settings"),style:{padding:"10px 20px",borderRadius:8,border:"none",background:l==="settings"?"var(--color-primary)":"var(--color-bg-secondary)",color:l==="settings"?"white":"var(--color-text-primary)",cursor:"pointer"},children:[e.jsx(T,{size:16,style:{marginRight:8}}),"알림 설정 (",r.length,")"]}),e.jsxs("button",{className:`tab-btn ${l==="history"?"active":""}`,onClick:()=>C("history"),style:{padding:"10px 20px",borderRadius:8,border:"none",background:l==="history"?"var(--color-primary)":"var(--color-bg-secondary)",color:l==="history"?"white":"var(--color-text-primary)",cursor:"pointer",position:"relative"},children:[e.jsx(u,{size:16,style:{marginRight:8}}),"알림 히스토리",S>0&&e.jsx("span",{style:{position:"absolute",top:-8,right:-8,background:"var(--color-danger)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:12},children:S})]})]}),l==="settings"&&e.jsxs("div",{className:"glass-card",style:{padding:24},children:[e.jsxs("h3",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(T,{size:20})," 활성 알림: ",F.length,"개"]}),r.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:r.map(s=>{var t,y,z;const a=((t=j.find(h=>h.value===s.type))==null?void 0:t.icon)||u;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,background:"var(--color-bg-secondary)",borderRadius:12,opacity:s.enabled?1:.5},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:10,background:"linear-gradient(135deg, #6366f1, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(a,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:s.name}),e.jsxs("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:[s.region," | ",(y=j.find(h=>h.value===s.type))==null?void 0:y.label," | ",(z=w.find(h=>h.value===s.condition))==null?void 0:z.label," ",s.threshold,"%"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("button",{className:"btn-icon",onClick:()=>J(s.id),style:{color:s.enabled?"var(--color-success)":"var(--color-text-secondary)"},children:s.enabled?e.jsx(I,{size:18}):e.jsx(f,{size:18})}),e.jsx("button",{className:"btn-icon",onClick:()=>L(s),children:e.jsx(K,{size:16})}),e.jsx("button",{className:"btn-icon",onClick:()=>_(s.id),style:{color:"var(--color-danger)"},children:e.jsx(B,{size:16})})]})]},s.id)})}):e.jsxs("div",{style:{textAlign:"center",padding:48,color:"var(--color-text-secondary)"},children:[e.jsx(u,{size:48,style:{marginBottom:16,opacity:.5}}),e.jsx("p",{children:"설정된 알림이 없습니다."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>x(!0),style:{marginTop:16},children:[e.jsx(D,{size:16})," 첫 알림 추가하기"]})]})]}),l==="history"&&e.jsxs("div",{className:"glass-card",style:{padding:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(Q,{size:20})," 최근 알림"]}),o.length>0&&e.jsxs("button",{className:"btn btn-secondary",onClick:V,style:{fontSize:13},children:[e.jsx(B,{size:14})," 모두 삭제"]})]}),o.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,padding:16,background:s.read?"var(--color-bg-secondary)":"rgba(99, 102, 241, 0.1)",borderRadius:12,borderLeft:`3px solid ${s.severity==="warning"?"var(--color-warning)":s.severity==="success"?"var(--color-success)":"var(--color-primary)"}`},onClick:()=>p(a=>a.map(t=>t.id===s.id?{...t,read:!0}:t)),children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:s.severity==="warning"?"var(--color-warning)":s.severity==="success"?"var(--color-success)":"var(--color-primary)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:s.type==="price"?e.jsx(A,{size:18,color:"white"}):s.type==="rate"?e.jsx(R,{size:18,color:"white"}):e.jsx(P,{size:18,color:"white"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:s.title}),e.jsx("div",{style:{fontSize:14,color:"var(--color-text-secondary)",marginBottom:4},children:s.message}),e.jsx("div",{style:{fontSize:12,color:"var(--color-text-tertiary)"},children:U(s.timestamp,"full")})]}),!s.read&&e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"var(--color-primary)",flexShrink:0}})]},s.id))}):e.jsxs("div",{style:{textAlign:"center",padding:48,color:"var(--color-text-secondary)"},children:[e.jsx(f,{size:48,style:{marginBottom:16,opacity:.5}}),e.jsx("p",{children:"알림 히스토리가 없습니다."})]})]})]})}export{oe as default};
//# sourceMappingURL=AlertSystem-B2UrEIsI.js.map
