import{r as h,j as e,C as ne,h as oe,T as ie,R as le,i as ce}from"./index-BYBhPLOX.js";import{c,a as S,f as V}from"./formatters-UyfiUF7z.js";import{S as de}from"./save-BfZ7pjXb.js";import{P as me}from"./piggy-bank-C-QXPtj_.js";import{P as he}from"./percent-BzbWGzFf.js";import{R as pe,C as xe,X as ye,Y as ge,T as ue,L as ve}from"./generateCategoricalChart-DhUO3NK-.js";import{A as je}from"./AreaChart-B6-uPhhY.js";import{A as D}from"./Area-D0doveRy.js";const fe=h.memo(()=>{const[y,C]=h.useState(()=>{const t=localStorage.getItem("investmentSimulations");return t?JSON.parse(t):[]}),[n,T]=h.useState({propertyType:"apartment",purchasePrice:1e5,depositPercent:30,loanRate:4.5,loanTerm:30,monthlyRent:150,deposit:1e4,maintenanceCost:20,propertyTax:.3,expectedAppreciation:3,holdingPeriod:10,vacancyRate:5,investmentName:""}),[x,k]=h.useState("rent"),[o,E]=h.useState({}),w=h.useCallback((t,r)=>{const s={};return["purchasePrice","depositPercent","monthlyRent","deposit","maintenanceCost","propertyTax","holdingPeriod","vacancyRate","loanTerm"].includes(t)&&r<0&&(s[t]="음수를 입력할 수 없습니다."),t==="purchasePrice"&&r>1e7&&(s[t]="매매가가 너무 큽니다. (1000억원 이하)"),t==="depositPercent"&&(r<0||r>100)&&(s[t]="자기자본 비율은 0~100% 사이여야 합니다."),t==="loanRate"&&(r<0||r>30)&&(s[t]="대출금리는 0~30% 사이여야 합니다."),t==="holdingPeriod"&&(r<1||r>50)&&(s[t]="보유기간은 1~50년 사이여야 합니다."),t==="vacancyRate"&&(r<0||r>100)&&(s[t]="공실률은 0~100% 사이여야 합니다."),t==="loanTerm"&&(r<1||r>50)&&(s[t]="대출기간은 1~50년 사이여야 합니다."),s},[]),i=h.useCallback((t,r)=>{const s=w(t,r);E(p=>{const g={...p};return Object.keys(s).length>0?g[t]=s[t]:delete g[t],g}),T(p=>({...p,[t]:r}))},[w]),a=h.useMemo(()=>{const{purchasePrice:t,depositPercent:r,loanRate:s,loanTerm:p,monthlyRent:g,deposit:J,maintenanceCost:K,propertyTax:X,expectedAppreciation:U,holdingPeriod:d,vacancyRate:Q}=n,m=t*(r/100),u=t-m,z=s/100/12,B=p*12,I=u>0?u*(z*Math.pow(1+z,B))/(Math.pow(1+z,B)-1):0,Z=g*12*(1-Q/100),W=J*.03,A=K*12,F=t*(X/100),M=I*12,v=x==="jeonse"?W-A-F-M:Z+W-A-F-M,_=v/12,ee=m>0?v/m*100:0,b=[];let j=t,O=-m,N=u;for(let l=0;l<=d;l++){const re=l>0?j*(U/100):0;j=j+re;const ae=l>0?u/p:0;N=Math.max(0,N-ae);const se=l>0?v:0;O+=se,b.push({year:l,propertyValue:Math.round(j),equity:Math.round(j-N),totalCashflow:Math.round(O),remainingLoan:Math.round(N)})}const R=b[d].propertyValue,P=R-t;let f=0;if(P>0){const l=P*.85;d>=2?f=l*.24:d>=1?f=l*.4:f=l*.5}const L=R-b[d].remainingLoan-m+v*d-f,q=m>0?L/m*100:0,te=d>0?(Math.pow(1+q/100,1/d)-1)*100:0;return{equityAmount:m,loanAmount:u,monthlyPayment:I,monthlyNetIncome:_,annualNetIncome:v,cashYield:ee,yearlyData:b,finalValue:R,totalAppreciation:P,capitalGainsTax:f,totalProfit:L,totalROI:q,annualizedROI:te}},[n,x]),G=()=>{const t=n.investmentName||`시뮬레이션 ${y.length+1}`,r={id:Date.now(),name:t,inputs:{...n,investmentName:t},investmentType:x,result:a,createdAt:new Date().toISOString()},s=[...y,r];C(s),localStorage.setItem("investmentSimulations",JSON.stringify(s)),i("investmentName","")},$=t=>{T(t.inputs),k(t.investmentType)},H=t=>{const r=y.filter(s=>s.id!==t);C(r),localStorage.setItem("investmentSimulations",JSON.stringify(r))},Y=[{id:"rent",label:"월세 투자"},{id:"gap",label:"갭투자"},{id:"jeonse",label:"전세 투자"}];return e.jsxs("div",{className:"page-container",children:[e.jsx("div",{className:"card",style:{marginBottom:24},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"var(--radius-md)",background:"linear-gradient(135deg, #10b981, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ne,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:"투자 시뮬레이터"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)"},children:"부동산 투자 수익률 예측"})]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:n.investmentName,onChange:t=>i("investmentName",t.target.value),placeholder:"시뮬레이션 이름",className:"input",style:{width:150}}),e.jsxs("button",{className:"btn btn-primary",onClick:G,children:[e.jsx(de,{size:16})," 저장"]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:24},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{marginBottom:16},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:12},children:"투자 유형"}),e.jsx("div",{style:{display:"flex",gap:8},children:Y.map(t=>e.jsx("button",{onClick:()=>k(t.id),className:`btn ${x===t.id?"btn-primary":"btn-ghost"}`,style:{flex:1,fontSize:"0.8rem"},children:t.label},t.id))})]}),e.jsxs("div",{className:"card",style:{marginBottom:16},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16},children:"매물 정보"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"purchasePrice",children:["매매가 ",e.jsx("span",{className:"unit",children:"(만원)"})]}),e.jsx("input",{id:"purchasePrice",type:"number",value:n.purchasePrice,onChange:t=>i("purchasePrice",Number(t.target.value)),placeholder:"예: 100000",style:o.purchasePrice?{borderColor:"var(--color-danger)"}:{}}),o.purchasePrice&&e.jsx("span",{style:{color:"var(--color-danger)",fontSize:"0.75rem",marginTop:4,display:"block"},children:o.purchasePrice})]}),x==="rent"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"monthlyRent",children:["월세 ",e.jsx("span",{className:"unit",children:"(만원)"})]}),e.jsx("input",{id:"monthlyRent",type:"number",value:n.monthlyRent,onChange:t=>i("monthlyRent",Number(t.target.value)),placeholder:"예: 150"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"deposit",children:["보증금 ",e.jsx("span",{className:"unit",children:"(만원)"})]}),e.jsx("input",{id:"deposit",type:"number",value:n.deposit,onChange:t=>i("deposit",Number(t.target.value)),placeholder:"예: 10000"})]})]}),x==="gap"&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"jeonsePrice",children:["전세가 ",e.jsx("span",{className:"unit",children:"(만원)"})]}),e.jsx("input",{id:"jeonsePrice",type:"number",value:n.deposit,onChange:t=>i("deposit",Number(t.target.value)),placeholder:"예: 80000"})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:16},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16},children:"자금 계획"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"depositPercent",children:["자기자본 비율 ",e.jsxs("span",{className:"unit",children:["(",n.depositPercent,"%)"]}),e.jsx("span",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--color-primary)",fontWeight:600},children:c(a.equityAmount)})]}),e.jsx("input",{id:"depositPercent",type:"range",min:"10",max:"100",value:n.depositPercent,onChange:t=>i("depositPercent",Number(t.target.value))}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"var(--color-text-tertiary)",marginTop:"4px"},children:[e.jsx("span",{children:"10%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"loanRate",children:["대출금리 ",e.jsx("span",{className:"unit",children:"(%)"})]}),e.jsx("input",{id:"loanRate",type:"number",step:"0.1",value:n.loanRate,onChange:t=>i("loanRate",Number(t.target.value)),placeholder:"예: 4.5",style:o.loanRate?{borderColor:"var(--color-danger)"}:{}}),o.loanRate&&e.jsx("span",{style:{color:"var(--color-danger)",fontSize:"0.75rem",marginTop:4,display:"block"},children:o.loanRate})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"loanTerm",children:["대출기간 ",e.jsx("span",{className:"unit",children:"(년)"})]}),e.jsx("input",{id:"loanTerm",type:"number",value:n.loanTerm,onChange:t=>i("loanTerm",Number(t.target.value)),placeholder:"예: 30",style:o.loanTerm?{borderColor:"var(--color-danger)"}:{}}),o.loanTerm&&e.jsx("span",{style:{color:"var(--color-danger)",fontSize:"0.75rem",marginTop:4,display:"block"},children:o.loanTerm})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16},children:"시세 전망"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"expectedAppreciation",children:["연평균 시세상승률 ",e.jsx("span",{className:"unit",children:"(%)"}),e.jsx("span",{className:"tooltip-help","data-tooltip":"과거 10년 수도권 평균: 약 3~5%",style:{marginLeft:6},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{id:"expectedAppreciation",type:"number",step:"0.5",value:n.expectedAppreciation,onChange:t=>i("expectedAppreciation",Number(t.target.value)),placeholder:"예: 3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"holdingPeriod",children:["보유기간 ",e.jsx("span",{className:"unit",children:"(년)"})]}),e.jsx("input",{id:"holdingPeriod",type:"number",value:n.holdingPeriod,onChange:t=>i("holdingPeriod",Number(t.target.value)),placeholder:"예: 10",style:o.holdingPeriod?{borderColor:"var(--color-danger)"}:{}}),o.holdingPeriod&&e.jsx("span",{style:{color:"var(--color-danger)",fontSize:"0.75rem",marginTop:4,display:"block"},children:o.holdingPeriod})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"vacancyRate",children:["예상 공실률 ",e.jsx("span",{className:"unit",children:"(%)"}),e.jsx("span",{className:"tooltip-help","data-tooltip":"일반적으로 5~10% 정도를 예상합니다",style:{marginLeft:6},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{id:"vacancyRate",type:"number",value:n.vacancyRate,onChange:t=>i("vacancyRate",Number(t.target.value)),placeholder:"예: 5",style:o.vacancyRate?{borderColor:"var(--color-danger)"}:{}}),o.vacancyRate&&e.jsx("span",{style:{color:"var(--color-danger)",fontSize:"0.75rem",marginTop:4,display:"block"},children:o.vacancyRate})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:20,marginBottom:24},children:[e.jsxs("div",{className:"stat-card",style:{minHeight:120},children:[e.jsxs("div",{className:"stat-card-header",style:{marginBottom:12},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--color-text-tertiary)",fontWeight:500},children:"총 투자수익률"}),e.jsx(oe,{size:20,style:{color:"var(--color-success)"}})]}),e.jsx("div",{className:"stat-card-value",style:{color:a.totalROI>=0?"var(--color-success)":"var(--color-danger)",fontSize:"1.75rem",whiteSpace:"nowrap"},children:S(a.totalROI)}),e.jsxs("div",{className:"stat-card-label",style:{marginTop:8},children:[n.holdingPeriod,"년 보유 기준"]})]}),e.jsxs("div",{className:"stat-card",style:{minHeight:120},children:[e.jsxs("div",{className:"stat-card-header",style:{marginBottom:12},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--color-text-tertiary)",fontWeight:500},children:"연평균 수익률"}),e.jsx(ie,{size:20,style:{color:"var(--color-primary)"}})]}),e.jsx("div",{className:"stat-card-value",style:{fontSize:"1.75rem",whiteSpace:"nowrap"},children:S(a.annualizedROI)}),e.jsx("div",{className:"stat-card-label",style:{marginTop:8},children:"CAGR"})]}),e.jsxs("div",{className:"stat-card",style:{minHeight:120},children:[e.jsxs("div",{className:"stat-card-header",style:{marginBottom:12},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--color-text-tertiary)",fontWeight:500},children:"월 순수익"}),e.jsx(me,{size:20,style:{color:"var(--color-warning)"}})]}),e.jsxs("div",{className:"stat-card-value",style:{color:a.monthlyNetIncome>=0?"var(--color-success)":"var(--color-danger)",fontSize:"1.75rem",whiteSpace:"nowrap"},children:[V(Math.round(a.monthlyNetIncome)),e.jsx("span",{style:{fontSize:"1rem",fontWeight:500,marginLeft:4},children:"만원"})]}),e.jsx("div",{className:"stat-card-label",style:{marginTop:8},children:"월간 현금흐름"})]}),e.jsxs("div",{className:"stat-card",style:{minHeight:120},children:[e.jsxs("div",{className:"stat-card-header",style:{marginBottom:12},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--color-text-tertiary)",fontWeight:500},children:"현금수익률"}),e.jsx(he,{size:20,style:{color:"var(--color-primary)"}})]}),e.jsx("div",{className:"stat-card-value",style:{fontSize:"1.75rem",whiteSpace:"nowrap"},children:S(a.cashYield)}),e.jsx("div",{className:"stat-card-label",style:{marginTop:8},children:"연간 Cash-on-Cash"})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:24},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16},children:"자산 가치 추이"}),e.jsx("div",{style:{height:300},children:e.jsx(pe,{width:"100%",height:"100%",children:e.jsxs(je,{data:a.yearlyData,children:[e.jsx(xe,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(ye,{dataKey:"year",tick:{fontSize:12},tickFormatter:t=>`${t}년`}),e.jsx(ge,{tick:{fontSize:12},tickFormatter:t=>`${(t/1e4).toFixed(0)}억`}),e.jsx(ue,{formatter:t=>c(t),labelFormatter:t=>`${t}년차`}),e.jsx(ve,{}),e.jsx(D,{type:"monotone",dataKey:"propertyValue",name:"부동산 가치",stroke:"#3b82f6",fill:"#3b82f620"}),e.jsx(D,{type:"monotone",dataKey:"equity",name:"순자산",stroke:"#10b981",fill:"#10b98120"})]})})})]}),e.jsxs("div",{className:"card",style:{marginBottom:24},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16},children:"상세 결과"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",marginBottom:4},children:"초기 투자금"}),e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:600},children:c(a.equityAmount)})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",marginBottom:4},children:"대출금"}),e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:600},children:c(a.loanAmount)})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",marginBottom:4},children:"월 상환금"}),e.jsxs("p",{style:{fontSize:"1.1rem",fontWeight:600},children:[V(Math.round(a.monthlyPayment)),"만원"]})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",marginBottom:4},children:"예상 매도가"}),e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:600},children:c(a.finalValue)})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",marginBottom:4},children:"시세차익"}),e.jsxs("p",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--color-success)"},children:["+",c(a.totalAppreciation)]})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",marginBottom:4},children:"예상 양도세"}),e.jsxs("p",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--color-danger)"},children:["-",c(a.capitalGainsTax)]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:20,background:a.totalProfit>=0?"var(--color-success-light)":"var(--color-danger-light)",borderRadius:"var(--radius-md)",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:4},children:"총 예상 수익"}),e.jsxs("p",{style:{fontSize:"2rem",fontWeight:700,color:a.totalProfit>=0?"var(--color-success)":"var(--color-danger)"},children:[a.totalProfit>=0?"+":"",c(a.totalProfit)]})]})]}),y.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16},children:"저장된 시뮬레이션"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:y.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:600},children:t.name}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)"},children:[c(t.inputs.purchasePrice)," | ROI ",S(t.result.totalROI)]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>$(t),children:e.jsx(le,{size:16})}),e.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>H(t.id),style:{color:"var(--color-danger)"},children:e.jsx(ce,{size:16})})]})]},t.id))})]})]})]}),e.jsx("div",{style:{marginTop:24,padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)",fontSize:"0.8rem",color:"var(--color-text-tertiary)"},children:"⚠️ 본 시뮬레이션은 참고용이며, 실제 투자 결과와 다를 수 있습니다. 세금 계산은 간소화되었으며, 정확한 세금은 세무사와 상담하세요."})]})});fe.displayName="InvestmentSimulator";export{fe as default};
//# sourceMappingURL=InvestmentSimulator-Cs05ByMI.js.map
