{"version":3,"file":"formatters-UyfiUF7z.js","sources":["../../src/utils/formatters.js"],"sourcesContent":["/**\r\n * 포맷팅 유틸리티 (성능 최적화 버전)\r\n * - Intl.NumberFormat 인스턴스 캐싱\r\n * - Map 기반 변환 테이블\r\n */\r\n\r\n// NumberFormat 인스턴스 캐싱 (매번 새로 생성하지 않음)\r\nconst numberFormatters = new Map();\r\n\r\nconst getNumberFormatter = (decimals) => {\r\n    const key = `number-${decimals}`;\r\n    if (!numberFormatters.has(key)) {\r\n        numberFormatters.set(key, new Intl.NumberFormat('ko-KR', {\r\n            minimumFractionDigits: decimals,\r\n            maximumFractionDigits: decimals,\r\n        }));\r\n    }\r\n    return numberFormatters.get(key);\r\n};\r\n\r\n// DateTimeFormat 인스턴스 캐싱\r\nconst dateFormatters = {\r\n    short: new Intl.DateTimeFormat('ko-KR', { month: 'short', day: 'numeric' }),\r\n    long: new Intl.DateTimeFormat('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' }),\r\n    full: new Intl.DateTimeFormat('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit' }),\r\n};\r\n\r\n// 숫자 포맷 (천 단위 콤마)\r\nexport const formatNumber = (num, decimals = 0) => {\r\n    if (num === null || num === undefined) return '-';\r\n    return getNumberFormatter(decimals).format(num);\r\n};\r\n\r\n// 퍼센트 포맷\r\nexport const formatPercent = (num, decimals = 1, showSign = true) => {\r\n    if (num === null || num === undefined) return '-';\r\n    const sign = showSign && num > 0 ? '+' : '';\r\n    return `${sign}${num.toFixed(decimals)}%`;\r\n};\r\n\r\n// 금액 포맷 (억/만 단위) - NaN 및 음수 처리 포함\r\nexport const formatCurrency = (amount, unit = '만원') => {\r\n    if (amount === null || amount === undefined || Number.isNaN(amount)) return '-';\r\n\r\n    const absAmount = Math.abs(amount);\r\n    const sign = amount < 0 ? '-' : '';\r\n\r\n    if (absAmount >= 10000) {\r\n        const eok = Math.floor(absAmount / 10000);\r\n        const remainder = absAmount % 10000;\r\n        if (remainder > 0) {\r\n            return `${sign}${formatNumber(eok)}억 ${formatNumber(remainder)}${unit}`;\r\n        }\r\n        return `${sign}${formatNumber(eok)}억`;\r\n    }\r\n    return `${sign}${formatNumber(absAmount)}${unit}`;\r\n};\r\n\r\n// 간단 금액 포맷\r\nexport const formatCompactCurrency = (amount) => {\r\n    if (amount >= 100000000) {\r\n        return `${(amount / 100000000).toFixed(1)}억`;\r\n    }\r\n    if (amount >= 10000) {\r\n        return `${(amount / 10000).toFixed(0)}만`;\r\n    }\r\n    return formatNumber(amount);\r\n};\r\n\r\n// 날짜 포맷 (캐싱된 포매터 사용)\r\nexport const formatDate = (dateStr, format = 'short') => {\r\n    if (!dateStr) return '-';\r\n\r\n    try {\r\n        const date = new Date(dateStr);\r\n        if (isNaN(date.getTime())) return dateStr;\r\n\r\n        const formatter = dateFormatters[format];\r\n        return formatter ? formatter.format(date) : dateStr;\r\n    } catch {\r\n        return dateStr;\r\n    }\r\n};\r\n\r\n// 변화율에 따른 트렌드 클래스 (Map 기반)\r\nconst trendClassMap = {\r\n    up: 'trend-up',\r\n    down: 'trend-down',\r\n    neutral: 'trend-neutral',\r\n};\r\n\r\nexport const getTrendClass = (value) => {\r\n    if (value > 0) return trendClassMap.up;\r\n    if (value < 0) return trendClassMap.down;\r\n    return trendClassMap.neutral;\r\n};\r\n\r\n// 변화율에 따른 색상\r\nconst trendColorMap = {\r\n    up: 'var(--color-success)',\r\n    down: 'var(--color-danger)',\r\n    neutral: 'var(--color-text-tertiary)',\r\n};\r\n\r\nexport const getTrendColor = (value) => {\r\n    if (value > 0) return trendColorMap.up;\r\n    if (value < 0) return trendColorMap.down;\r\n    return trendColorMap.neutral;\r\n};\r\n\r\n// 중요도 맵 (객체 조회로 switch 대체)\r\nconst importanceBadgeMap = {\r\n    critical: 'badge-danger',\r\n    high: 'badge-warning',\r\n    medium: 'badge-primary',\r\n    low: 'badge-secondary',\r\n};\r\n\r\nexport const getImportanceBadgeClass = (importance) => {\r\n    return importanceBadgeMap[importance] || importanceBadgeMap.low;\r\n};\r\n\r\nconst importanceLabelMap = {\r\n    critical: '매우 중요',\r\n    high: '중요',\r\n    medium: '보통',\r\n    low: '낮음',\r\n};\r\n\r\nexport const getImportanceLabel = (importance) => {\r\n    return importanceLabelMap[importance] || importanceLabelMap.low;\r\n};\r\n\r\n// 카테고리 맵\r\nconst categoryLabelMap = {\r\n    indicator: '경제지표',\r\n    policy: '정책',\r\n    'real-estate': '부동산',\r\n};\r\n\r\nexport const getCategoryLabel = (category) => {\r\n    return categoryLabelMap[category] || category;\r\n};\r\n\r\n// 면적 변환 (평 <-> 제곱미터)\r\nexport const pyeongToSqm = (pyeong) => pyeong * 3.305785;\r\nexport const sqmToPyeong = (sqm) => sqm / 3.305785;\r\n\r\n// 금액 단위 변환\r\nexport const manwonToWon = (manwon) => manwon * 10000;\r\nexport const wonToManwon = (won) => won / 10000;\r\n\r\n// 숫자 약어 (K, M, B)\r\nexport const abbreviateNumber = (num) => {\r\n    if (num >= 1000000000) return `${(num / 1000000000).toFixed(1)}B`;\r\n    if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;\r\n    if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;\r\n    return num.toString();\r\n};\r\n\r\n// 비율 계산\r\nexport const calculateChangeRate = (current, previous) => {\r\n    if (!previous || previous === 0) return 0;\r\n    return ((current - previous) / previous) * 100;\r\n};\r\n"],"names":["numberFormatters","getNumberFormatter","decimals","key","dateFormatters","formatNumber","num","formatPercent","showSign","formatCurrency","amount","unit","absAmount","sign","eok","remainder","formatCompactCurrency","formatDate","dateStr","format","date","formatter","trendClassMap","getTrendClass","value","importanceBadgeMap","getImportanceBadgeClass","importance","importanceLabelMap","getImportanceLabel"],"mappings":"AAOA,MAAMA,EAAmB,IAAI,IAEvBC,EAAsBC,GAAa,CACrC,MAAMC,EAAM,UAAUD,CAAQ,GAC9B,OAAKF,EAAiB,IAAIG,CAAG,GACzBH,EAAiB,IAAIG,EAAK,IAAI,KAAK,aAAa,QAAS,CACrD,sBAAuBD,EACvB,sBAAuBA,CACnC,CAAS,CAAC,EAECF,EAAiB,IAAIG,CAAG,CACnC,EAGMC,EAAiB,CACnB,MAAO,IAAI,KAAK,eAAe,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,EAC1E,KAAM,IAAI,KAAK,eAAe,QAAS,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,SAAS,CAAE,EACzF,KAAM,IAAI,KAAK,eAAe,QAAS,CAAE,KAAM,UAAW,MAAO,UAAW,IAAK,SAAS,CAAE,CAChG,EAGaC,EAAe,CAACC,EAAKJ,EAAW,IACrCI,GAAQ,KAAkC,IACvCL,EAAmBC,CAAQ,EAAE,OAAOI,CAAG,EAIrCC,EAAgB,CAACD,EAAKJ,EAAW,EAAGM,EAAW,KACpDF,GAAQ,KAAkC,IAEvC,GADME,GAAYF,EAAM,EAAI,IAAM,EAC3B,GAAGA,EAAI,QAAQJ,CAAQ,CAAC,IAI7BO,EAAiB,CAACC,EAAQC,EAAO,OAAS,CACnD,GAAID,GAAW,MAAgC,OAAO,MAAMA,CAAM,EAAG,MAAO,IAE5E,MAAME,EAAY,KAAK,IAAIF,CAAM,EAC3BG,EAAOH,EAAS,EAAI,IAAM,GAEhC,GAAIE,GAAa,IAAO,CACpB,MAAME,EAAM,KAAK,MAAMF,EAAY,GAAK,EAClCG,EAAYH,EAAY,IAC9B,OAAIG,EAAY,EACL,GAAGF,CAAI,GAAGR,EAAaS,CAAG,CAAC,KAAKT,EAAaU,CAAS,CAAC,GAAGJ,CAAI,GAElE,GAAGE,CAAI,GAAGR,EAAaS,CAAG,CAAC,GACtC,CACA,MAAO,GAAGD,CAAI,GAAGR,EAAaO,CAAS,CAAC,GAAGD,CAAI,EACnD,EAGaK,EAAyBN,GAC9BA,GAAU,IACH,IAAIA,EAAS,KAAW,QAAQ,CAAC,CAAC,IAEzCA,GAAU,IACH,IAAIA,EAAS,KAAO,QAAQ,CAAC,CAAC,IAElCL,EAAaK,CAAM,EAIjBO,EAAa,CAACC,EAASC,EAAS,UAAY,CACrD,GAAI,CAACD,EAAS,MAAO,IAErB,GAAI,CACA,MAAME,EAAO,IAAI,KAAKF,CAAO,EAC7B,GAAI,MAAME,EAAK,QAAO,CAAE,EAAG,OAAOF,EAElC,MAAMG,EAAYjB,EAAee,CAAM,EACvC,OAAOE,EAAYA,EAAU,OAAOD,CAAI,EAAIF,CAChD,MAAQ,CACJ,OAAOA,CACX,CACJ,EAGMI,EAAgB,CAClB,GAAI,WACJ,KAAM,aACN,QAAS,eACb,EAEaC,EAAiBC,GACtBA,EAAQ,EAAUF,EAAc,GAChCE,EAAQ,EAAUF,EAAc,KAC7BA,EAAc,QAiBnBG,EAAqB,CACvB,SAAU,eACV,KAAM,gBACN,OAAQ,gBACR,IAAK,iBACT,EAEaC,EAA2BC,GAC7BF,EAAmBE,CAAU,GAAKF,EAAmB,IAG1DG,EAAqB,CACvB,SAAU,QACV,KAAM,KACN,OAAQ,KACR,IAAK,IACT,EAEaC,EAAsBF,GACxBC,EAAmBD,CAAU,GAAKC,EAAmB"}