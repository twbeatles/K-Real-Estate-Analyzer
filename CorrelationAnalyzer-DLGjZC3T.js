import{r as o,g as V,a as X,f as Z,j as e,A as B,T as U}from"./index-CYZWzN-v.js";import{C as R}from"./ChartContainer-BNrOX3Mt.js";import{c as J,a as O,l as P}from"./advancedAnalytics-B3l14pa9.js";import{g as Q,X as j,Y as v,f as _,R as F,C as w,T as I,b as E,B as ee}from"./generateCategoricalChart-BFGJiXPU.js";import{S as W,Z as re}from"./Scatter-CX9Fe4XD.js";import{B as te}from"./BarChart-B2xUAQ4S.js";import{I as ae}from"./info-Ds7I-QVP.js";import{T as se}from"./trending-down-Bg1681sF.js";import"./download-DzfAnetr.js";var le=Q({chartName:"ScatterChart",GraphicalChild:W,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:j},{axisType:"yAxis",AxisComp:v},{axisType:"zAxis",AxisComp:re}],formatAxisMap:_});const ye=()=>{var S,N,C,k,z,M,T,D;const[l,Y]=o.useState("hpiSeoul"),[s,K]=o.useState("rate"),[u,L]=o.useState(12),h=o.useMemo(()=>V(),[]),g=o.useMemo(()=>X(),[]),b=o.useMemo(()=>Z(),[]),n=[{id:"hpiSeoul",label:"서울 주택가격지수",color:"#ef4444"},{id:"hpiNation",label:"전국 주택가격지수",color:"#3b82f6"},{id:"cpi",label:"소비자물가지수",color:"#f59e0b"},{id:"jeonseSeoul",label:"서울 전세지수",color:"#10b981"},{id:"rate",label:"기준금리",color:"#8b5cf6"},{id:"m2",label:"M2 통화량",color:"#ec4899"}],c=o.useMemo(()=>{const r=[];for(let a=2e3;a<=2025;a++){const t=h.filter(y=>y.year===a),i=g.filter(y=>y.year===a),A=b.filter(y=>y.year===a);t.length>0&&r.push({year:a,hpiSeoul:t[t.length-1].hpiSeoul,hpiNation:t[t.length-1].hpiNation,cpi:t[t.length-1].cpi,jeonseSeoul:t[t.length-1].jeonseSeoul,rate:i.length>0?i[i.length-1].rate:null,m2:A.length>0?A[0].amount:null})}return r},[h,g,b]),p=o.useMemo(()=>{const r=c.map(t=>t[l]).filter(t=>t!==null),a=c.map(t=>t[s]).filter(t=>t!==null);return J(r,a)},[c,l,s]),$=o.useMemo(()=>{const r=h.map(i=>i[l]||0),a=g.flatMap(i=>Array(3).fill(i.rate)),t=s==="rate"?a.slice(0,r.length):h.map(i=>i[s]||0);return O(r,t,u)},[h,g,l,s,u]),d=o.useMemo(()=>{const r=c.map(t=>t[s]).filter((t,i)=>t!==null&&c[i][l]!==null),a=c.map(t=>t[l]).filter((t,i)=>t!==null&&c[i][s]!==null);return r.length<2?null:P(r,a)},[c,l,s]),x=o.useMemo(()=>c.filter(r=>r[l]!==null&&r[s]!==null).map(r=>({x:r[s],y:r[l],year:r.year})),[c,l,s]),q=r=>{const a=Math.abs(r);return a>=.8?{text:"매우 강함",color:"var(--color-success)"}:a>=.6?{text:"강함",color:"var(--color-primary)"}:a>=.4?{text:"보통",color:"var(--color-warning)"}:a>=.2?{text:"약함",color:"var(--color-text-tertiary)"}:{text:"매우 약함",color:"var(--color-text-tertiary)"}},G=r=>r>.1?{text:"정(+)의 상관",icon:U}:r<-.1?{text:"부(-)의 상관",icon:se}:{text:"상관 없음",icon:B},m=q(p),f=G(p),H=f.icon;return e.jsxs("div",{className:"page-container",children:[e.jsx("div",{className:"card",style:{marginBottom:24},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"var(--radius-md)",background:"var(--gradient-primary)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(B,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:"상관관계 분석기"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)"},children:"부동산과 거시경제 변수 간 상관관계 분석"})]})]})})}),e.jsxs("div",{className:"card",style:{marginBottom:24},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:16},children:"변수 선택"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",display:"block",marginBottom:8},children:"변수 1 (종속)"}),e.jsx("select",{className:"input select",value:l,onChange:r=>Y(r.target.value),children:n.map(r=>e.jsx("option",{value:r.id,children:r.label},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",display:"block",marginBottom:8},children:"변수 2 (독립)"}),e.jsx("select",{className:"input select",value:s,onChange:r=>K(r.target.value),children:n.map(r=>e.jsx("option",{value:r.id,children:r.label},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.8rem",color:"var(--color-text-tertiary)",display:"block",marginBottom:8},children:"최대 시차 (개월)"}),e.jsx("input",{type:"number",className:"input",value:u,onChange:r=>L(Number(r.target.value)),min:1,max:24})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:24},children:[e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-card-header",children:[e.jsx("span",{className:"stat-card-label",children:"상관계수 (r)"}),e.jsx(H,{size:20,style:{color:m.color}})]}),e.jsx("div",{className:"stat-card-value",style:{color:m.color},children:p.toFixed(3)}),e.jsx("div",{className:"stat-card-label",children:f.text})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card-header",children:e.jsx("span",{className:"stat-card-label",children:"상관 강도"})}),e.jsx("div",{className:"stat-card-value",style:{fontSize:"1.2rem",color:m.color},children:m.text}),e.jsxs("div",{className:"stat-card-label",children:["|r| = ",Math.abs(p).toFixed(3)]})]}),d&&e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card-header",children:e.jsx("span",{className:"stat-card-label",children:"결정계수 (R²)"})}),e.jsxs("div",{className:"stat-card-value",children:[(d.rSquared*100).toFixed(1),"%"]}),e.jsx("div",{className:"stat-card-label",children:"설명력"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card-header",children:e.jsx("span",{className:"stat-card-label",children:"데이터 포인트"})}),e.jsx("div",{className:"stat-card-value",children:x.length}),e.jsx("div",{className:"stat-card-label",children:"연간 데이터"})]})]}),e.jsxs("div",{className:"grid-charts",style:{marginBottom:24},children:[e.jsx(R,{title:"산점도 및 회귀선",subtitle:`${(S=n.find(r=>r.id===l))==null?void 0:S.label} vs ${(N=n.find(r=>r.id===s))==null?void 0:N.label}`,height:400,children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(le,{children:[e.jsx(w,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(j,{dataKey:"x",name:(C=n.find(r=>r.id===s))==null?void 0:C.label,tick:{fontSize:11,fill:"var(--color-text-tertiary)"}}),e.jsx(v,{dataKey:"y",name:(k=n.find(r=>r.id===l))==null?void 0:k.label,tick:{fontSize:11,fill:"var(--color-text-tertiary)"}}),e.jsx(I,{cursor:{strokeDasharray:"3 3"},contentStyle:{background:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},formatter:(r,a)=>[r==null?void 0:r.toFixed(2),a],labelFormatter:r=>{var a;return`연도: ${((a=x.find(t=>t.x===r))==null?void 0:a.year)||r}`}}),e.jsx(W,{data:x,fill:"var(--color-primary)"}),d&&e.jsx(E,{segment:[{x:Math.min(...x.map(r=>r.x)),y:d.intercept+d.slope*Math.min(...x.map(r=>r.x))},{x:Math.max(...x.map(r=>r.x)),y:d.intercept+d.slope*Math.max(...x.map(r=>r.x))}],stroke:"var(--color-danger)",strokeWidth:2,strokeDasharray:"5 5"})]})})}),e.jsx(R,{title:"시차 상관관계",subtitle:"선행/후행 관계 분석",height:400,children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(te,{data:$,children:[e.jsx(w,{strokeDasharray:"3 3",stroke:"var(--color-border)",vertical:!1}),e.jsx(j,{dataKey:"lag",tick:{fontSize:11,fill:"var(--color-text-tertiary)"},label:{value:"시차 (개월)",position:"bottom",offset:-5,fontSize:11}}),e.jsx(v,{domain:[-1,1],tick:{fontSize:11,fill:"var(--color-text-tertiary)"}}),e.jsx(I,{contentStyle:{background:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},formatter:r=>[r.toFixed(3),"상관계수"],labelFormatter:r=>`시차: ${r}개월`}),e.jsx(E,{y:0,stroke:"var(--color-text-tertiary)"}),e.jsx(ee,{dataKey:"correlation",fill:"var(--color-primary)",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{fontSize:"0.95rem",fontWeight:600,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(ae,{size:18}),"분석 해석"]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-tertiary)",borderRadius:"var(--radius-md)",fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:1.7},children:[e.jsxs("p",{children:[e.jsx("strong",{style:{color:"var(--color-text-primary)"},children:(z=n.find(r=>r.id===l))==null?void 0:z.label}),"와",e.jsxs("strong",{style:{color:"var(--color-text-primary)"},children:[" ",(M=n.find(r=>r.id===s))==null?void 0:M.label]}),"의 상관계수는 ",e.jsx("strong",{style:{color:m.color},children:p.toFixed(3)}),"으로",e.jsxs("strong",{style:{color:m.color},children:[" ",m.text]})," ",f.text,"관계를 보입니다."]}),d&&e.jsxs("p",{style:{marginTop:12},children:["회귀분석 결과, ",(T=n.find(r=>r.id===s))==null?void 0:T.label,"가 1단위 증가할 때",(D=n.find(r=>r.id===l))==null?void 0:D.label,"는 평균적으로",e.jsxs("strong",{children:[" ",d.slope.toFixed(2)]})," 변화합니다. 이 모델은 변동의 ",e.jsxs("strong",{children:[(d.rSquared*100).toFixed(1),"%"]}),"를 설명합니다."]}),e.jsx("p",{style:{marginTop:12,fontSize:"0.8rem",color:"var(--color-text-tertiary)"},children:"※ 시차 상관관계에서 양(+)의 시차는 변수1이 변수2보다 선행함을 의미합니다."})]})]})]})};export{ye as default};
//# sourceMappingURL=CorrelationAnalyzer-DLGjZC3T.js.map
